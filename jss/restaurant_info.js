let restaurant;var map;window.initMap=(()=>{fetchRestaurantFromURL((e,t)=>{e?console.error(e):(self.map=new google.maps.Map(document.getElementById("map"),{zoom:16,center:t.latlng,scrollwheel:!1}),fillBreadcrumb(),DBHelper.mapMarkerForRestaurant(self.restaurant,self.map))})}),fetchRestaurantFromURL=(e=>{if(self.restaurant)return void e(null,self.restaurant);const t=getParameterByName("id");t?DBHelper.fetchRestaurantById(t,(t,r)=>{self.restaurant=r,r?(fillRestaurantHTML(),e(null,r)):console.error(t)}):(error="No restaurant id in URL",e(error,null))}),fillRestaurantHTML=((e=self.restaurant)=>{const t=document.getElementById("restaurant-name");t.innerHTML=e.name,t.setAttribute("tabindex","0");const r=document.getElementById("restaurant-address");r.innerHTML=e.address,r.setAttribute("tabindex","0");const n=document.getElementById("restaurant-img");n.className="restaurant-img lazy",n.alt=e.name,n.sizes=DBHelper.imageUrlForRestaurant_sizes(e),n.srcset=DBHelper.imageUrlForRestaurant_responsive(e),n.src=DBHelper.imageUrlForRestaurant(e);const a=document.getElementById("restaurant-cuisine");a.innerHTML=e.cuisine_type,a.setAttribute("tabindex","0"),e.operating_hours&&fillRestaurantHoursHTML(),fillReviewsHTML()}),fillRestaurantHoursHTML=((e=self.restaurant.operating_hours)=>{const t=document.getElementById("restaurant-hours");t.setAttribute("tabindex","0");for(let r in e){const n=document.createElement("tr"),a=document.createElement("td");a.innerHTML=r,n.appendChild(a);const i=document.createElement("td");i.innerHTML=e[r],n.appendChild(i),t.appendChild(n)}}),fillReviewsHTML=((e=self.restaurant.reviews)=>{const t=document.getElementById("reviews-container"),r=document.createElement("h2");if(r.innerHTML="Reviews",r.setAttribute("tabindex","0"),t.appendChild(r),!e){const e=document.createElement("p");return e.innerHTML="No reviews yet!",void t.appendChild(e)}const n=document.getElementById("reviews-list");n.setAttribute("tabindex","0"),n.setAttribute("role","listbox"),n.setAttribute("aria-label","review-list"),e.forEach(e=>{n.appendChild(createReviewHTML(e))}),t.appendChild(n)}),createReviewHTML=(e=>{const t=document.createElement("li");t.setAttribute("tabindex","0"),t.setAttribute("role","listitem");const r=document.createElement("p");r.setAttribute("tabindex","0"),r.innerHTML=e.name,t.appendChild(r);const n=document.createElement("p");n.setAttribute("tabindex","0"),n.innerHTML=e.date,t.appendChild(n);const a=document.createElement("p");a.innerHTML=`Rating: ${e.rating}`,a.setAttribute("tabindex","0"),t.appendChild(a);const i=document.createElement("p");return i.setAttribute("style","text-align:left;"),i.setAttribute("tabindex","0"),i.innerHTML=e.comments,t.appendChild(i),t}),fillBreadcrumb=((e=self.restaurant)=>{const t=document.getElementById("breadcrumb"),r=document.createElement("li");r.setAttribute("tabindex","0"),r.setAttribute("aria-current","page"),r.setAttribute("role","listitem"),r.innerHTML=e.name,t.appendChild(r)}),getParameterByName=((e,t)=>{t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");const r=new RegExp(`[?&]${e}(=([^&#]*)|&|#|$)`).exec(t);return r?r[2]?decodeURIComponent(r[2].replace(/\+/g," ")):"":null}),"serviceWorker"in navigator&&navigator.serviceWorker.register("sw.js").then(function(e){console.log("Service Worker registration successful with scope: ",e.scope)}).catch(function(e){console.log("Service Worker registration failed: ",e)});